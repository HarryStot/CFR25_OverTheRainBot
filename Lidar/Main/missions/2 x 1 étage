{
  "variables": {
    "pin_servo_0": 0,
    "pin_servo_1": 1,
    "pin_servo_2": 2,
    "pin_servo_3": 3,
    "pin_servo_clamp": 15,

    "speed_servo": 8,
    "speed_step": 100,

    "angle_intitalisation_0": 30,
    "angle_intitalisation_1": 90,
    "angle_intitalisation_2": 90,
    "angle_intitalisation_3": 90,
    "angle_intitalisation_clamp": 30,

    "step_intitalisation": 100,

    "step_down": 0,

    "angle_grabe_plank": 50,
    "angle_CansToExt_servo_0": 125,
    "angle_CansToExt_servo_3": 0,

    "angle_demagnetize_servo_0": 25,
    "angle_demagnetize_servo_1": 0,
    "angle_demagnetize_servo_2": 0,
    "angle_demagnetize_servo_3": 135,

    "step_RaiseToGoBack": 50,

    "angle_drop_servo_clamp": 10,




    "default_time": 5,
    "precision_movement_speed" : 75
  },

  "task_templates": {

    "initalisation_servo": {
      "command": "SRV",
      "params": {
        "$pin_servo_0": ":$angle_intitalisation_0:$speed_servo",
        "$pin_servo_1": ":$angle_intitalisation_1:$speed_servo",
        "$pin_servo_2": ":$angle_intitalisation_2:$speed_servo",
        "$pin_servo_3": ":$angle_intitalisation_3:$speed_servo",
        "$pin_servo_clamp": ":$angle_intitalisation_clamp:$speed_servo",
      },
      "completion_time": "$default_time"
    },


    "initalisation_step": {
      "command": "STEP",
      "params": {
        "$speed_step": "$step_intitalisation"
      },
      "completion_time": "$default_time"
    },

    "down_step": {
      "command": "STEP",
      "params": {
        "$speed_step": "$step_down"
      },
      "completion_time": "$default_time"
    },

    "Grab_plank": {
      "command": "SRV",
      "params": {
        "$pin_servo_clamp": ":$angle_grabe_plank:$speed_servo"
      },
      "completion_time": "$default_time"
    },

    "Cans_to_ext": {
      "command": "SRV",
      "params": {
        "$pin_servo_0": ":$angle_CansToExt_servo_0:$speed_servo",
        "$pin_servo_3": ":$angle_CansToExt_servo_3:$speed_servo",
      },
      "completion_time": "$default_time"
    },

    "Demagnetize_middle_can": {
      "command": "SRV",
      "params": {
        "$pin_servo_1": ":$angle_demagnetize_servo_1:$speed_servo",
        "$pin_servo_2": ":$angle_demagnetize_servo_2:$speed_servo",
      },
      "completion_time": "$default_time"
    },

    "Raise_to_go_back": {
      "command": "STEP",
      "params": {
        "$speed_step": "$step_RaiseToGoBack"
      },
      "completion_time": "$default_time"
    },

    "Put_back_in_place": {
      "command": "SRV",
      "params": {
        "$pin_servo_0": ":$angle_intitalisation_0:$speed_servo",
        "$pin_servo_1": ":$angle_intitalisation_1:$speed_servo",
        "$pin_servo_2": ":$angle_intitalisation_2:$speed_servo",
        "$pin_servo_3": ":$angle_intitalisation_3:$speed_servo",
      },
      "completion_time": "$default_time"
    },

    "Drop_plank": {
      "command": "SRV",
      "params": {
        "$pin_servo_clamp": ":$angle_drop_servo_clamp:$speed_servo"
      },
      "completion_time": "$default_time"
    },

    "Demagnetize_ext_can": {
      "command": "SRV",
      "params": {
        "$pin_servo_0": ":$angle_demagnetize_servo_0:$speed_servo",
        "$pin_servo_3": ":$angle_demagnetize_servo_3:$speed_servo",
      },
      "completion_time": "$default_time"
    },

  },

  "movement_templates": {
    "precision_approach": [
      {"command": "V", "params": {"speed": "$precision_movement_speed"}},
      {"command": "F", "params": {"distance": 5}}
    ],
    "turn_around": [
      {"command": "V", "params": {"speed": "$rotation_speed"}},
      {"command": "R", "params": {"angle": 180}}
    ],
    "back_up": [
      {"command": "V", "params": {"speed": "$movement_speed"}},
      {"command": "B", "params": {"distance": 5}}
    ]
  },

  "action_sequences": {
    "deposit": {
      "steps": [
        {"type": "task", "template": "put_ground"},
        {"type": "task", "template": "grab_plank"},
        {"type": "task", "template": "cans_to_ext"},
        {"type": "task", "template": "demagnetize_middle_cans"},
        {"type": "movement", "template": "back_up"},
        {"type": "task", "template": "put_middle_cans_in_front"},
        {"type": "task", "template": "raise_over_the_plank"},
        {"type": "movement", "template": "precision_approach"},
        {"type": "task", "template": "put_cans_in_front"},
        {"type": "task", "template": "put_cans_on_plank"},
        {"type": "task", "template": "drop_plank"},
        {"type": "task", "template": "demagnetize_ext_cans"},
        {"type": "movement", "template": "back_up"},
        {"type": "task", "template": "put_magnets_in_front"},
        {"type": "task", "template": "put_ground"}
      ]
    }
  },

  "locations": [
    {
      "name": "BlueStart",
      "x": 177.5,
      "y": 5.0,
      "orientation": 90,
      "tasks": []
    },
    {
      "name": "FirstBlueStock",
      "x": 190.0,
      "y": 80.0,
      "orientation": 90,
      "tasks": [
        {
          "name": "RaiseDuringMovement",
          "template": "raise_during_movement"
        }
      ]
    },
    {
      "name": "BlueDropToFirstDeposit",
      "x": 177.5,
      "y": 40.0,
      "orientation": -90,
      "action_sequence": "deposit"
    }
  ]
}
